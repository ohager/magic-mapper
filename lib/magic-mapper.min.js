Object.defineProperty(exports,"__esModule",{value:!0});
var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_createClass=function(){function a(a,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();
function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}var Direct=Symbol("MagicMapper.Direct");function mapWithSchema(a,b,d){a=b[a];return a===Direct?d:"function"===typeof a?a.call(null,d):a}
var MagicMapper=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,a);this.options=Object.assign({propertyTransform:null,valueTransform:null,exclusive:!1},b);if(this.options.propertyTransform&&"function"!==typeof this.options.propertyTransform)throw"'propertyTransform' must be a function";if(this.options.valueTransform&&"function"!==typeof this.options.valueTransform)throw"'valueTransform ' must be a function";}_createClass(a,null,[{key:"Direct",
get:function(){return Direct}}]);_createClass(a,[{key:"map",value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,g={};if(this.options.exclusive&&!c)throw"Exclusive option requires a schema!";Object.keys(a).forEach(function(e){var f=b.options.propertyTransform?b.options.propertyTransform(e):e,d=(e=b.options.valueTransform?b.options.valueTransform(a[e]):a[e])&&Array.isArray(e),h=e&&"object"===("undefined"===typeof e?"undefined":_typeof(e))&&!d;if(!b.options.exclusive||
c[f])!h&&c&&c.hasOwnProperty(f)?g[f]=mapWithSchema(f,c,e):d?g[f]=e.map(function(a){return"object"===("undefined"===typeof a?"undefined":_typeof(a))?b.map(a,c):a}):h?(d=c&&c[f],g[f]="function"===typeof d?c[f].call(null,e):b.map(e,d)):b.options.exclusive||(g[f]=e)});return g}}]);return a}();exports["default"]=MagicMapper;
