Object.defineProperty(exports,"__esModule",{value:!0});
var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_createClass=function(){function a(a,c){for(var e=0;e<c.length;e++){var b=c[e];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}();
function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}var Direct="@@MagicMapper.Direct";function mapWithSchema(a,b,c){a=b[a];return a===Direct?c:"function"===typeof a?a.call(null,c):a}
var MagicMapper=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,a);this.options=Object.assign({propertyTransform:null,valueTransform:null,exclusive:!1},b);if(this.options.propertyTransform&&"function"!==typeof this.options.propertyTransform)throw"'propertyTransform' must be a function";if(this.options.valueTransform&&"function"!==typeof this.options.valueTransform)throw"'valueTransform ' must be a function";}_createClass(a,null,[{key:"Direct",
get:function(){return Direct}}]);_createClass(a,[{key:"map",value:function(a){var c=this,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,g={};if(this.options.exclusive&&!b)throw"Exclusive option requires a schema!";if(Array.isArray(a))return a.map(function(a){return"object"===("undefined"===typeof a?"undefined":_typeof(a))?c.map(a,b):a});Object.keys(a).forEach(function(d){var f=c.options.propertyTransform?c.options.propertyTransform(d):d,e=(d=c.options.valueTransform?c.options.valueTransform(a[d]):
a[d])&&Array.isArray(d),h=d&&"object"===("undefined"===typeof d?"undefined":_typeof(d))&&!e;if(!c.options.exclusive||b[f])!h&&b&&b.hasOwnProperty(f)?g[f]=mapWithSchema(f,b,d):e?g[f]=d.map(function(a){return"object"===("undefined"===typeof a?"undefined":_typeof(a))?c.map(a,b):a}):h?(e=b&&b[f],g[f]="function"===typeof e?b[f].call(null,d):c.map(d,e)):c.options.exclusive||(g[f]=d)});return g}}]);return a}();exports["default"]=MagicMapper;
